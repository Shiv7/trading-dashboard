# Server Configuration
server.port=8085
spring.application.name=trading-dashboard

# MongoDB Configuration - MUST match tradeExecutionModule database
spring.data.mongodb.uri=mongodb://localhost:27017/tradeIngestion
spring.data.mongodb.auto-index-creation=true

# Kafka Configuration
spring.kafka.bootstrap-servers=localhost:9092
spring.kafka.consumer.group-id=trading-dashboard-v2
# FIX BUG #22: Use "latest" for real-time dashboard to avoid replaying old messages on restart
# Change to "earliest" if you need to catch up on missed messages
spring.kafka.consumer.auto-offset-reset=latest
# FIX BUG #23: Kafka tuning for dashboard throughput
spring.kafka.listener.concurrency=3
spring.kafka.consumer.max-poll-records=500

# Kafka Topics
kafka.topics.family-candle-1m=family-candle-1m
kafka.topics.family-candle-5m=family-candle-5m
kafka.topics.family-candle-15m=family-candle-15m
kafka.topics.family-candle-30m=family-candle-30m
kafka.topics.signals-curated=trading-signals-curated
kafka.topics.trade-outcomes=trade-outcomes
kafka.topics.regime-index=regime-index-output
kafka.topics.regime-security=regime-security-output

# Actuator
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always

# Logging
logging.level.com.kotsin.dashboard=INFO
logging.level.org.springframework.web.socket=DEBUG
logging.pattern.console=%d{HH:mm:ss.SSS} %-5level [%thread] %logger{36} - %msg%n

# Swagger / OpenAPI
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method

# Redis Configuration - Using database 0 where virtual positions are stored
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.database=0

# TradeExecutionModule Connection (for order proxy)
execution.service.url=http://localhost:8089
execution.service.timeout=5000

# JWT Configuration - MUST override JWT_SECRET in production
jwt.secret=${JWT_SECRET:K0tsinTr4d1ngD4shb0ardS3cretK3y2026!@#SecureJWT256Bit}
jwt.expiration=${JWT_EXPIRATION:86400000}

# Default Admin - MUST override in production via environment variables
admin.default.username=${ADMIN_USERNAME:devina}
admin.default.email=${ADMIN_EMAIL:devina@kotsin.com}
admin.default.password=${ADMIN_PASSWORD:devina}

# CORS â€” comma-separated allowed origin patterns
cors.allowed-origins=http://localhost:*,http://127.0.0.1:*,http://3.111.242.49:*,https://3.111.242.49:*

# ============================================================================
# SIGNAL SAFETY: TTL, Dedup, Daily Cap
# ============================================================================
# Auto-execute all trading signals (no manual confirmation needed)
signal.auto.execute=true
signal.confirmation.timeout.seconds=600

# FUDKII signal TTL in dashboard cache (minutes)
signal.fudkii.ttl.minutes=30
# Pivot signal TTL in dashboard cache (minutes)
signal.pivot.ttl.minutes=30
# Max FUDKII signals per instrument per day
signal.fudkii.max.per.day=5
# Max Pivot signals per instrument per day
signal.pivot.max.per.day=5
# FUKAA signal TTL in dashboard cache (minutes)
signal.fukaa.ttl.minutes=30
# Max FUKAA signals per instrument per day
signal.fukaa.max.per.day=5

